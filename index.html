<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bus Tracker with GPS</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <header>
        <div class="logo">
            <i class="fas fa-bus"></i>
            <h1>Bus Tracker GPS</h1>
        </div>
        <div class="header-info">
            <div>Last Update: <span id="last-update">--:--:--</span></div>
            <div>Active Buses: <span id="active-buses">0</span></div>
        </div>
    </header>
    
    <div class="container">
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="search-box">
                    <input type="text" placeholder="Search for a bus...">
                    <button><i class="fas fa-search"></i></button>
                </div>
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="total-buses">0</div>
                        <div class="stat-label">Total Buses</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="on-time">0</div>
                        <div class="stat-label">On Time</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="delayed">0</div>
                        <div class="stat-label">Delayed</div>
                    </div>
                </div>
            </div>
            <div class="bus-list" id="bus-list">
                <!-- Bus items will be added here dynamically -->
                <div class="bus-item">
                    <div class="bus-icon"><i class="fas fa-bus"></i></div>
                    <div class="bus-info">
                        <h3>Loading buses...</h3>
                        <p>Please wait</p>
                    </div>
                    <span class="bus-status status-on-time">Loading</span>
                </div>
            </div>
        </div>
        
        <div class="map-container">
            <div id="map"></div>
            <div class="map-controls">
                <button class="control-btn" id="zoom-in" title="Zoom In">
                    <i class="fas fa-plus"></i>
                </button>
                <button class="control-btn" id="zoom-out" title="Zoom Out">
                    <i class="fas fa-minus"></i>
                </button>
                <button class="control-btn" id="locate-me" title="Locate Me">
                    <i class="fas fa-crosshairs"></i>
                </button>
                <button class="control-btn" id="bus-select-btn" title="Select Bus">
                    <i class="fas fa-bus"></i>
                </button>
                <button class="control-btn" id="stop-tracking" title="Stop Tracking" style="display: none;">
                    <i class="fas fa-stop"></i>
                </button>
            </div>
            <div class="gps-status" id="gps-status">
                <div class="gps-indicator gps-inactive" id="gps-indicator"></div>
                <span id="gps-text">GPS Inactive</span>
            </div>
            <button class="debug-toggle" id="debug-toggle">Debug</button>
            <div class="debug-panel" id="debug-panel">
                <h3>Debug Information</h3>
                <div id="debug-content">No data yet</div>
            </div>
        </div>
    </div>
    
    <div class="modal" id="bus-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Select Your Bus</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Choose the bus you're currently driving:</p>
                <div class="bus-options">
                    <div class="bus-option" data-bus-id="1">
                        <strong>Campus Shuttle A</strong> (ID: 1)
                    </div>
                    <div class="bus-option" data-bus-id="2">
                        <strong>North Route</strong> (ID: 2)
                    </div>
                    <div class="bus-option" data-bus-id="3">
                        <strong>South Route</strong> (ID: 3)
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn btn-cancel" id="cancel-select">Cancel</button>
                <button class="modal-btn btn-confirm" id="confirm-select">Confirm</button>
            </div>
        </div>
    </div>
    
    <div class="toast" id="toast">
        <i class="fas fa-info-circle"></i>
        <span id="toast-message"></span>
    </div>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="./app.js"></script>
</body>
</html>